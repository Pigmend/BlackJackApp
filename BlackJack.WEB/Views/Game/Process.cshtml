@using Newtonsoft.Json
@model BlackJack.ViewModels.ProcessGameView
@{
    ViewBag.Title = "StartNewGame";

    BlackJack.ViewModels.UserGameProcessViewlItem user = Model.User;
    IEnumerable<BlackJack.ViewModels.CardGameProcessViewItem> cards = Model.Cards;
}

<h2>StartNewGame</h2>

<div class="Game-content">
    <div class="UserInteface">
        <div class="UserStory">
            <table>
                <tr>
                    <td id="GamesPlayed"><h3>Data 1</h3></td>
                </tr>
                <tr>
                    <td id="GamesWon"><h3>Data 2</h3></td>
                </tr>
            </table>
        </div>
        <div class="User-buttons">
            <p id="UserButtons"></p>
        </div>
    </div>

    <div class="myClassPlayersInfos">
        <div class="Employee">
            <div class="Employee-info">
                <p id="playerInfo">@user.Name</p>
            </div>
            <div class="Employee-content">
                <p id="playerContent">Here Player Info</p>
            </div>
        </div>

        <div class="Employee">
            <div class="Employee-info">
                <p id="dillerInfo">Dealer Info</p>
            </div>
            <div class="Employee-content">
                <p id="dillerContent">Here Dealer Content</p>
            </div>
        </div>

        @for (int i = 1; i <= user.SelectedBots; i++)
        {
            <div class="Employee">
                <div class="Employee-info">
                    <p id="botInfo_@i">BOT #@i</p>
                </div>
                <div class="Employee-content">
                    <p id="botContent_@i">CONTENT</p>
                </div>
            </div>
        }
        <input type="hidden" value="@Url.Action("SaveChanges", "Game")" name="SaveUrl" />
        <input type="hidden" value="@Url.Action("GetCard", "Game")" name="GetCardUrl" />

        <input type="hidden" value="@user.SelectedBots" name="SelectedBots" />
        <input type="hidden" value="@Model.GameID" name="GameId" />

        <input type="hidden" value="@user.Name" name="UserName" />
        <input type="hidden" value="@user.ID" name="UserId" />

    </div>
</div>

@section Scripts {
    <script src="~/Scripts/app/game.js"></script>
    <script>
        var userSelectedBots = $('input[name=SelectedBots]').val();
        var gameID = $('input[name=GameId]').val();

        var pathToSave = $('input[name=SaveUrl]').val();
        var pathToGetCard = $('input[name=GetCardUrl]').val();

        var username = $('input[name=UserName]').val();
        var userId = $('input[name=UserId]').val();

        var userObj = new Entity(username, userId, 3);
        var botList = new Array();
        for (var i = 0; i < userSelectedBots; i++) {
            var numberOfBot = i + 1;
            botList.push(new Entity('BOT ' + numberOfBot, i + 1, 2));
        }

        UpdateUI_BeginGame();
        Update();
    </script>
}


